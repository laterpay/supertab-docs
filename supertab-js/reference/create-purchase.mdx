---
title: "Supertab.createPurchase"
description: "API reference for `Supertab.createPurchase`"
sidebarTitle: "Supertab.createPurchase"
---

import PurchaseStateSummaryTypes from "/snippets/supertab-js/purchase-state-summary-types.mdx";

## Parameters

| Key                | Type     | Required | Description                                                         |
| :----------------- | :------- | :------- | :------------------------------------------------------------------ |
| `offeringId`       | `string` | Yes      | ID of the offering created in the Business Portal                   |
| `purchaseMetadata` | `object` | No       | Key-value pairs of custom information associated with the purchase. |

## Returns

A promise that resolves to the function to start the purchase and a destroy method to control the purchase widget programmatically. Type of the response is [`CreatePurchaseResult`](#createpurchaseresult).

| Field           | Type                                  | Description                                             |
| :-------------- | :------------------------------------ | :------------------------------------------------------ |
| `startPurchase` | `() => Promise<PurchaseStateSummary>` | The startPurchase function to start the purchase flow.  |
| `destroy`       | `() => void`                          | Clean up and remove all Supertab elements from the DOM. |

## Example

```javascript
const supertabClient = new Supertab({ clientId: "client.your_client" });

const { startPurchase, destroy } = await supertabClient.createPurchase({
  offeringId: "offering.your-offering-id",
});

const result = await startPurchase();

// Then you can handle the result
if (result.purchase?.status === "completed") {
  console.log("Purchase completed successfully:", result.purchase);
} else if (result.purchase?.status === "abandoned") {
  console.log("Purchase cancelled:", result.purchase);
} else if (result.priorEntitlement) {
  console.log("User already has entitlement:", result.priorEntitlement);
}
```

## Types

### `PurchaseStateSummary`

<PurchaseStateSummaryTypes />

### `CreatePurchaseResult`

```typescript CreatePurchaseResult type definition
interface CreatePurchaseResult {
  startPurchase: () => Promise<PurchaseStateSummary>;
  destroy: () => void;
}
```
